# 智能体创建 - 基本应用

## 智能体模板

### 1. 代码审查智能体

```yaml
智能体名称: CodeReviewer
角色: 代码审查专家

上下文范围:
  工作目录: ./src/
  包含文件:
    - 所有 .py 文件
    - 测试文件
  排除:
    - node_modules/
    - __pycache__/

任务指令:
  1. 审查代码质量
  2. 检查潜在bug
  3. 提出改进建议
  4. 验证代码规范

输出格式:
  - 问题列表
  - 严重程度标记
  - 修改建议

约束:
  - 只审查代码，不修改
  - 关注可维护性
  - 遵循团队规范
```

### 2. 测试生成智能体

```yaml
智能体名称: TestGenerator
角色: 测试用例生成专家

上下文范围:
  工作目录: ./tests/
  包含文件:
    - 源代码（只读）
    - 现有测试
  知识库:
    - 测试框架文档
    - 测试最佳实践

任务指令:
  1. 分析源代码功能
  2. 设计测试用例
  3. 生成测试代码
  4. 确保覆盖率

输出格式:
  - 测试文件
  - 测试用例说明
  - 覆盖率报告

约束:
  - 遵循AAA模式
  - 测试独立可运行
  - 包含边界条件
```

### 3. 文档生成智能体

```yaml
智能体名称: DocWriter
角色: 技术文档编写专家

上下文范围:
  工作目录: ./docs/
  包含文件:
    - 源代码（只读）
    - API定义
    - 现有文档

任务指令:
  1. 分析代码功能
  2. 编写API文档
  3. 生成使用示例
  4. 创建架构图

输出格式:
  - Markdown文档
  - API参考
  - 代码示例

约束:
  - 清晰简洁
  - 包含示例
  - 保持更新
```

---

## 智能体创建流程

### 步骤1: 定义角色

**明确智能体职责**：
```yaml
思考问题:
  - 这个智能体要做什么？
  - 它的专长是什么？
  - 它不需要做什么？

示例:
  ❌ 代码助手（太泛）
  ✅ Python代码重构专家（专精）
```

### 步骤2: 确定范围

**定义上下文边界**：
```yaml
需要的信息:
  - 哪些文件是必须的？
  - 哪些知识是必要的？
  - 工作目录在哪里？

不需要的信息:
  - 排除哪些文件？
  - 避免哪些干扰？
```

### 步骤3: 编写指令

**清晰的任务指令**：
```yaml
指令结构:
  1. 角色定位
  2. 任务描述
  3. 输出要求
  4. 约束条件
  5. 示例

质量标准:
  - 具体明确
  - 可执行
  - 可验证
```

### 步骤4: 测试验证

**验证智能体有效性**：
```yaml
测试用例:
  - 给定输入
  - 执行任务
  - 检查输出
  - 验证隔离性
```

---

## 实际案例

### 案例: 创建日志分析智能体

**需求**：分析应用日志，识别异常模式

**智能体定义**：
```python
class LogAnalyzer:
    name = "LogAnalyzer"
    role = "日志分析专家"

    # 上下文范围
    context = {
        "work_dir": "./logs/",
        "files": ["*.log"],
        "knowledge": ["日志格式规范", "异常模式库"]
    }

    # 任务指令
    instructions = """
    分析日志文件中的异常模式：
    1. 识别错误日志
    2. 统计错误频率
    3. 发现异常模式
    4. 生成分析报告
    """

    # 输出格式
    output_format = {
        "summary": "错误概览",
        "patterns": "异常模式列表",
        "recommendations": "处理建议"
    }
```

**使用智能体**：
```python
# 创建智能体
agent = LogAnalyzer()

# 执行任务
report = agent.analyze_logs(
    log_file="app.log",
    time_range="last_24h"
)

# 输出结果
print(report.summary)
print(report.patterns)
```

---

## 智能体协作

### 简单协作模式

**流水线模式**：
```yaml
智能体1: CodeReviewer
  输出: 审查报告
    ↓
智能体2: TestGenerator
  输入: 审查后的代码
  输出: 测试用例
    ↓
智能体3: DocWriter
  输入: 测试用例
  输出: API文档
```

**优势**：
- 每个智能体专注自己的任务
- 上下文完全隔离
- 易于维护和调试

---

*本层覆盖智能体模板、创建流程和实际案例*
