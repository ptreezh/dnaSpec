---
name: dnaspec-workspace
description: Manage isolated workspaces to prevent context explosion and ensure clean task execution. Each task gets independent workspace with isolated context, input/output management, and automatic cleanup. When you need isolated task execution, workspace management, context isolation, or prevent cross-task pollution, use this skill.
---

# DNASPEC Workspace

## ä½¿ç”¨æ—¶æœº

å½“ç”¨æˆ·æåˆ°ä»¥ä¸‹éœ€æ±‚æ—¶ï¼Œä½¿ç”¨æ­¤æŠ€èƒ½ï¼š
- "å·¥ä½œåŒºç®¡ç†" æˆ– "workspace management"
- "ç‹¬ç«‹å·¥ä½œåŒº" æˆ– "isolated workspace"
- "ä¸Šä¸‹æ–‡éš”ç¦»" æˆ– "context isolation"
- "ä»»åŠ¡å·¥ä½œåŒº" æˆ– "task workspace"
- "é˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“" æˆ– "prevent context pollution"
- "æ¸…ç†å·¥ä½œåŒº" æˆ– "clean workspace"
- "ä»»åŠ¡ä¸Šä¸‹æ–‡éš”ç¦»" æˆ– "task context isolation"
- éœ€è¦ä¸ºä»»åŠ¡åˆ›å»ºç‹¬ç«‹å·¥ä½œç¯å¢ƒ
- éœ€è¦é˜²æ­¢ä»»åŠ¡é—´ç›¸äº’å¹²æ‰°
- éœ€è¦ç®¡ç†ä¸´æ—¶å·¥ä½œç©ºé—´

**ä¸è¦åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨**ï¼š
- âŒ æŒä¹…åŒ–æ–‡ä»¶å­˜å‚¨ï¼ˆä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿï¼‰
- âŒ ç‰ˆæœ¬ç®¡ç†ï¼ˆä½¿ç”¨gitæŠ€èƒ½ï¼‰
- âŒ é•¿æœŸæ•°æ®å­˜å‚¨ï¼ˆä½¿ç”¨æ•°æ®åº“ï¼‰

## æ ¸å¿ƒç†å¿µ

### ğŸ¯ ç‹¬ç«‹å·¥ä½œåŒºéš”ç¦»ï¼ˆIndependent Workspace Isolationï¼‰

**ä»€ä¹ˆæ˜¯ç‹¬ç«‹å·¥ä½œåŒºéš”ç¦»ï¼Ÿ**

æ¯ä¸ªä»»åŠ¡æˆ–æ™ºèƒ½ä½“éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹å·¥ä½œåŒºï¼ŒåŒ…å«ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ã€è¾“å…¥ã€è¾“å‡ºå’Œä¸´æ—¶æ–‡ä»¶ã€‚å·¥ä½œåŒºé—´ç›¸äº’éš”ç¦»ï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“å’Œå¹²æ‰°ã€‚

```
âŒ å…±äº«å·¥ä½œåŒºçš„é—®é¢˜ï¼š

é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€ task1_output.py
â”œâ”€ task2_output.py
â”œâ”€ task3_temp.py
â”œâ”€ combined_context.md  â† æ‰€æœ‰ä»»åŠ¡å…±äº«ä¸Šä¸‹æ–‡ï¼
â””â”€ temp_files/          â† æ‰€æœ‰ä»»åŠ¡å…±äº«ä¸´æ—¶æ–‡ä»¶ï¼

é—®é¢˜ï¼š
- ä¸Šä¸‹æ–‡æ··ä¹±ï¼Œéš¾ä»¥åŒºåˆ†å“ªäº›å†…å®¹å±äºå“ªä¸ªä»»åŠ¡
- ä¸´æ—¶æ–‡ä»¶æ±¡æŸ“ï¼Œä¸çŸ¥é“å“ªäº›å¯ä»¥åˆ é™¤
- ä»»åŠ¡é—´ç›¸äº’å¹²æ‰°ï¼Œéš¾ä»¥å¤ç°
- ä¸Šä¸‹æ–‡çˆ†ç‚¸ï¼Œæ‰€æœ‰ä»»åŠ¡çš„å†…å®¹ç´¯ç§¯
```

```
âœ… ç‹¬ç«‹å·¥ä½œåŒºçš„ä¼˜åŠ¿ï¼š

workspaces/
â”œâ”€ task-001-auth-design/
â”‚   â”œâ”€ context.md          # ä»»åŠ¡1çš„ç‹¬ç«‹ä¸Šä¸‹æ–‡
â”‚   â”œâ”€ input/
â”‚   â”œâ”€ output/
â”‚   â””â”€ workspace/
â”œâ”€ task-002-order-flow/
â”‚   â”œâ”€ context.md          # ä»»åŠ¡2çš„ç‹¬ç«‹ä¸Šä¸‹æ–‡
â”‚   â”œâ”€ input/
â”‚   â”œâ”€ output/
â”‚   â””â”€ workspace/
â””â”€ task-003-payment-api/
    â”œâ”€ context.md          # ä»»åŠ¡3çš„ç‹¬ç«‹ä¸Šä¸‹æ–‡
    â”œâ”€ input/
    â”œâ”€ output/
    â””â”€ workspace/

ä¼˜åŠ¿ï¼š
âœ… æ¯ä¸ªä»»åŠ¡ä¸Šä¸‹æ–‡ç‹¬ç«‹ï¼Œæ¸…æ™°æ˜ç¡®
âœ… ä¸´æ—¶æ–‡ä»¶éš”ç¦»ï¼Œæ˜“äºæ¸…ç†
âœ… ä»»åŠ¡äº’ä¸å¹²æ‰°ï¼Œæ˜“äºå¤ç°
âœ… é˜²æ­¢ä¸Šä¸‹æ–‡çˆ†ç‚¸ï¼Œæ¯ä¸ªå·¥ä½œåŒºå¯ç‹¬ç«‹ç®¡ç†
```

**ç‹¬ç«‹å·¥ä½œåŒºçš„å…³é”®åŸåˆ™**ï¼š

**1. å·¥ä½œåŒºéš”ç¦»**
```yaml
workspace_isolation:
  principle: æ¯ä¸ªä»»åŠ¡ä¸€ä¸ªç‹¬ç«‹ç›®å½•

  structure:
    task-{id}-{name}/
    â”œâ”€ context.md          # ç‹¬ç«‹ä¸Šä¸‹æ–‡ï¼ˆæ ¸å¿ƒï¼‰
    â”œâ”€ input/              # è¾“å…¥æ–‡ä»¶
    â”œâ”€ output/             # è¾“å‡ºæ–‡ä»¶
    â”œâ”€ workspace/          # ä¸´æ—¶å·¥ä½œç©ºé—´
    â””â”€ metadata.json       # ä»»åŠ¡å…ƒæ•°æ®

  isolation_guarantee:
    - ä¸Šä¸‹æ–‡æ–‡ä»¶ä¸å…±äº«
    - ä¸´æ—¶æ–‡ä»¶ä¸äº¤å‰
    - è¾“å‡ºæ–‡ä»¶ç‹¬ç«‹ç®¡ç†
    - ä»»åŠ¡ç»“æŸåå¯æ¸…ç†
```

**2. ä¸Šä¸‹æ–‡éš”ç¦»**
```yaml
context_isolation:
  principle: æ¯ä¸ªå·¥ä½œåŒºæœ‰ç‹¬ç«‹çš„context.md

  benefits:
    - é˜²æ­¢ä¸Šä¸‹æ–‡çˆ†ç‚¸
    - ä»»åŠ¡ä¸Šä¸‹æ–‡æ¸…æ™°
    - æ˜“äºç†è§£å’Œç»´æŠ¤
    - å¯ç‹¬ç«‹æ‰§è¡Œ

  example:
    task-001-context.md: |
      # ä»»åŠ¡ï¼šç”¨æˆ·è®¤è¯è®¾è®¡
      ## çº¦æŸæ¡ä»¶
      - ä½¿ç”¨JWTè®¤è¯
      - Tokenæœ‰æ•ˆæœŸ24å°æ—¶
      ## è¾“å…¥
      - ç”¨æˆ·éœ€æ±‚æ–‡æ¡£
      ## è¾“å‡º
      - è®¤è¯APIè®¾è®¡

    task-002-context.md: |
      # ä»»åŠ¡ï¼šè®¢å•æµç¨‹è®¾è®¡
      ## çº¦æŸæ¡ä»¶
      - è®¢å•çŠ¶æ€æœº
      - æ”¯ä»˜é›†æˆ
      ## è¾“å…¥
      - ä¸šåŠ¡éœ€æ±‚
      ## è¾“å‡º
      - æµç¨‹å›¾

    â†’ å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
```

**3. è‡ªåŠ¨æ¸…ç†**
```yaml
auto_cleanup:
  principle: ä»»åŠ¡å®Œæˆåè‡ªåŠ¨æ¸…ç†å·¥ä½œåŒº

  cleanup_strategy:
    on_success:
      - ä¿ç•™output/ä¸­çš„å…³é”®æ–‡ä»¶
      - æ¸…ç†workspace/ä¸´æ—¶æ–‡ä»¶
      - å½’æ¡£context.mdåˆ°å†å²è®°å½•

    on_failure:
      - ä¿ç•™æ‰€æœ‰æ–‡ä»¶ç”¨äºè°ƒè¯•
      - æ ‡è®°å·¥ä½œåŒºä¸ºfailed
      - é€šçŸ¥ç”¨æˆ·æ£€æŸ¥

    scheduled:
      - æ¸…ç†30å¤©å‰çš„å·¥ä½œåŒº
      - æ¸…ç†æœªå®Œæˆä½†è¶…æ—¶çš„ä»»åŠ¡å·¥ä½œåŒº
      - å‹ç¼©å½’æ¡£é•¿æœŸä¿ç•™çš„å·¥ä½œåŒº
```

### ğŸ¯ é˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“ï¼ˆPreventing Context Pollutionï¼‰

**ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡æ±¡æŸ“ï¼Ÿ**

ä¸Šä¸‹æ–‡æ±¡æŸ“æ˜¯æŒ‡ä¸åŒä»»åŠ¡æˆ–æ™ºèƒ½ä½“çš„ä¸Šä¸‹æ–‡ç›¸äº’æ··åˆï¼Œå¯¼è‡´ï¼š
- ä¸Šä¸‹æ–‡æ··ä¹±ï¼Œéš¾ä»¥ç†è§£
- ä¿¡æ¯å†—ä½™ï¼Œä¸Šä¸‹æ–‡è†¨èƒ€
- ä»»åŠ¡é—´ç›¸äº’å¹²æ‰°
- éš¾ä»¥å®šä½é—®é¢˜

**é˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“çš„æªæ–½**ï¼š

**æªæ–½1ï¼šç‰©ç†éš”ç¦»**
```yaml
physical_isolation:
  directory_structure:
    - æ¯ä¸ªä»»åŠ¡ç‹¬ç«‹çš„ç›®å½•
    - ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡æ–‡ä»¶
    - ç‹¬ç«‹çš„è¾“å…¥è¾“å‡ºç›®å½•
    - ç‹¬ç«‹çš„ä¸´æ—¶å·¥ä½œç©ºé—´

  enforcement:
    - ç¦æ­¢è·¨å·¥ä½œåŒºæ–‡ä»¶å¼•ç”¨
    - ç¦æ­¢å…±äº«ä¸Šä¸‹æ–‡æ–‡ä»¶
    - ç¦æ­¢å…±äº«ä¸´æ—¶æ–‡ä»¶
```

**æªæ–½2ï¼šé€»è¾‘éš”ç¦»**
```yaml
logical_isolation:
  context_boundary:
    - æ¯ä¸ªcontext.mdåªåŒ…å«æœ¬ä»»åŠ¡ç›¸å…³ä¿¡æ¯
    - é€šè¿‡è¾“å…¥æ–‡ä»¶ä¼ é€’å¤–éƒ¨ä¿¡æ¯
    - é€šè¿‡è¾“å‡ºæ–‡ä»¶è¿”å›ç»“æœ
    - ä»»åŠ¡é—´åªé€šè¿‡æ˜ç¡®å®šä¹‰çš„æ¥å£é€šä¿¡

  metadata_tracking:
    - ä»»åŠ¡ID
    - ä»»åŠ¡åç§°
    - åˆ›å»ºæ—¶é—´
    - çŠ¶æ€ï¼ˆpending/in_progress/completed/failedï¼‰
    - ä¾èµ–å…³ç³»
```

**æªæ–½3ï¼šç”Ÿå‘½å‘¨æœŸç®¡ç†**
```yaml
lifecycle_management:
  creation:
    - ä»»åŠ¡åˆ›å»ºæ—¶ç”Ÿæˆå·¥ä½œåŒº
    - åˆå§‹åŒ–context.md
    - åˆ›å»ºå¿…è¦ç›®å½•ç»“æ„

  execution:
    - ä»»åŠ¡åœ¨å·¥ä½œåŒºå†…æ‰§è¡Œ
    - æ‰€æœ‰æ“ä½œé™å®šåœ¨å·¥ä½œåŒºå†…
    - ç›‘æ§å·¥ä½œåŒºå¤§å°

  completion:
    - éªŒè¯è¾“å‡º
    - æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    - å½’æ¡£å·¥ä½œåŒº
    - æ›´æ–°ä»»åŠ¡çŠ¶æ€
```

### ğŸ¯ æ ¼å¼å¡”è®¤çŸ¥åŸåˆ™åœ¨å·¥ä½œåŒºç®¡ç†ä¸­çš„åº”ç”¨

**æ•´ä½“æ€§åŸåˆ™ï¼ˆWhole > Sum of Partsï¼‰**ï¼š

```
âŒ ç¢ç‰‡åŒ–çš„æ–‡ä»¶ç®¡ç†ï¼š

é¡¹ç›®æ ¹ç›®å½•ä¸‹æ•£è½å„ç§æ–‡ä»¶ï¼š
â”œâ”€ auth.py
â”œâ”€ auth_test.py
â”œâ”€ auth_temp.py
â”œâ”€ order.py
â”œâ”€ order_test.py
â”œâ”€ payment.py
â”œâ”€ temp_auth_output.json
â””â”€ ...

é—®é¢˜ï¼šéš¾ä»¥çœ‹å‡ºå“ªäº›æ–‡ä»¶å±äºå“ªä¸ªä»»åŠ¡

âœ… æ•´ä½“åŒ–çš„å·¥ä½œåŒºï¼š

workspaces/
â”œâ”€ task-001-authentication/
â”‚   â”œâ”€ context.md
â”‚   â”œâ”€ input/requirements.md
â”‚   â”œâ”€ output/auth_api_design.md
â”‚   â””â”€ workspace/auth_implementation.py
â”œâ”€ task-002-order-flow/
â”‚   â”œâ”€ context.md
â”‚   â”œâ”€ input/business_rules.md
â”‚   â”œâ”€ output/order_flow_diagram.md
â”‚   â””â”€ workspace/
â””â”€ task-003-payment/
    â”œâ”€ context.md
    â””â”€ ...

ä¼˜åŠ¿ï¼šæ¯ä¸ªä»»åŠ¡æ˜¯ä¸€ä¸ª"æ•´ä½“"ï¼Œå®Œæ•´ä¸”ç‹¬ç«‹
```

**ä»ç®€å•åˆ°å¤æ‚æ¼”åŒ–**ï¼š

```
å·¥ä½œåŒºæ¼”åŒ–è·¯å¾„ï¼š

é˜¶æ®µ1ï¼šæœ€ç®€å·¥ä½œåŒºï¼ˆç®€å•ï¼‰
task-001/
â”œâ”€ context.md
â”œâ”€ input/
â””â”€ output/
â†’ æ»¡è¶³åŸºæœ¬éš”ç¦»éœ€æ±‚

â†“ é€æ­¥æ¼”åŒ–

é˜¶æ®µ2ï¼šæ ‡å‡†å·¥ä½œåŒºï¼ˆç¨å¤æ‚ï¼‰
task-002/
â”œâ”€ context.md
â”œâ”€ input/
â”œâ”€ output/
â”œâ”€ workspace/           # æ·»åŠ ä¸´æ—¶å·¥ä½œç©ºé—´
â””â”€ metadata.json        # æ·»åŠ å…ƒæ•°æ®
â†’ æ”¯æŒæ›´å¤æ‚çš„ä»»åŠ¡

â†“ ç»§ç»­æ¼”åŒ–

é˜¶æ®µ3ï¼šæ™ºèƒ½ä½“å·¥ä½œåŒºï¼ˆå¤æ‚ï¼‰
task-003/
â”œâ”€ context.md           # å±€éƒ¨ä¸Šä¸‹æ–‡
â”œâ”€ capabilities.yaml    # æ™ºèƒ½ä½“èƒ½åŠ›å®šä¹‰
â”œâ”€ input/
â”œâ”€ output/
â”œâ”€ workspace/
â”‚   â”œâ”€ models/          # æ¨¡å‹æ–‡ä»¶
â”‚   â”œâ”€ cache/           # æ™ºèƒ½ä½“ç¼“å­˜
â”‚   â””â”€ logs/            # æ™ºèƒ½ä½“æ—¥å¿—
â””â”€ metadata.json
â†’ æ”¯æŒæ™ºèƒ½ä½“ä»»åŠ¡ï¼Œä½†ä¿æŒéš”ç¦»
```

---

## å…¨ç”Ÿå‘½å‘¨æœŸåº”ç”¨

### ğŸ“‹ Ideaé˜¶æ®µï¼šä¸ºæ¦‚å¿µåˆ›å»ºç‹¬ç«‹æ€è€ƒç©ºé—´

**åœºæ™¯**ï¼šç”¨æˆ·æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œéœ€è¦ç‹¬ç«‹çš„æ€è€ƒç©ºé—´

**ç¤ºä¾‹**ï¼š
```
ç”¨æˆ·æƒ³æ³•ï¼š"æˆ‘æƒ³è®¾è®¡ä¸€ä¸ªAIä»£ç åŠ©æ‰‹"

å·¥ä½œåŒºåˆ›å»ºï¼š
ğŸ“‹ ä»»åŠ¡å·¥ä½œåŒºåˆå§‹åŒ–
workspaces/task-001-ai-code-assistant/
â”œâ”€ context.md
â”‚   â”œâ”€ ä»»åŠ¡ï¼šAIä»£ç åŠ©æ‰‹æ¦‚å¿µè®¾è®¡
â”‚   â”œâ”€ çº¦æŸï¼šåˆå§‹æ¦‚å¿µï¼Œä»ç®€å•å¼€å§‹
â”‚   â”œâ”€ è¾“å…¥ï¼šç”¨æˆ·æƒ³æ³•
â”‚   â””â”€ è¾“å‡ºï¼šæ¦‚å¿µæ–‡æ¡£
â”œâ”€ input/
â”‚   â””â”€ idea.md          # ç”¨æˆ·æƒ³æ³•è®°å½•
â”œâ”€ output/
â”‚   â””â”€ concept.md       # æ¦‚å¿µæ–‡æ¡£è¾“å‡º
â””â”€ workspace/
    â””â”€ brainstorm.md    # ä¸´æ—¶æ€è€ƒè®°å½•

âœ… æ ¼å¼å¡”åŸåˆ™ï¼šç‹¬ç«‹ä½†å®Œæ•´çš„æ€è€ƒç©ºé—´
- ä¸Šä¸‹æ–‡æ¸…æ™°
- è¾“å…¥è¾“å‡ºåˆ†ç¦»
- ä¸´æ—¶å·¥ä½œç©ºé—´ç‹¬ç«‹
- æ˜“äºæ¸…ç†å’Œé‡æ„
```

### ğŸ“‹ éœ€æ±‚é˜¶æ®µï¼šä¸ºæ¯ä¸ªéœ€æ±‚æ¨¡å—åˆ›å»ºç‹¬ç«‹å·¥ä½œåŒº

**åœºæ™¯**ï¼šæœ‰å¤šä¸ªéœ€æ±‚æ¨¡å—ï¼Œéœ€è¦ç‹¬ç«‹å¤„ç†

**ç¤ºä¾‹**ï¼š
```
éœ€æ±‚ï¼šç”µå•†å¹³å°éœ€è¦è®¾è®¡ç”¨æˆ·ã€å•†å“ã€è®¢å•æ¨¡å—

å·¥ä½œåŒºç®¡ç†ï¼š
ğŸ“‹ æ¨¡å—åŒ–å·¥ä½œåŒº

workspaces/
â”œâ”€ task-001-user-module/
â”‚   â”œâ”€ context.md       # ç”¨æˆ·æ¨¡å—ä¸Šä¸‹æ–‡
â”‚   â”œâ”€ input/
â”‚   â”‚   â””â”€ user_requirements.md
â”‚   â”œâ”€ output/
â”‚   â”‚   â””â”€ user_design.md
â”‚   â””â”€ workspace/
â”œâ”€ task-002-product-module/
â”‚   â”œâ”€ context.md       # å•†å“æ¨¡å—ä¸Šä¸‹æ–‡ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â”œâ”€ input/
â”‚   â”‚   â””â”€ product_requirements.md
â”‚   â”œâ”€ output/
â”‚   â”‚   â””â”€ product_design.md
â”‚   â””â”€ workspace/
â””â”€ task-003-order-module/
    â”œâ”€ context.md       # è®¢å•æ¨¡å—ä¸Šä¸‹æ–‡ï¼ˆç‹¬ç«‹ï¼‰
    â”œâ”€ input/
    â”‚   â””â”€ order_requirements.md
    â”œâ”€ output/
    â”‚   â””â”€ order_design.md
    â””â”€ workspace/

âœ… é˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“ï¼š
- æ¯ä¸ªæ¨¡å—æœ‰ç‹¬ç«‹ä¸Šä¸‹æ–‡
- æ¨¡å—é—´é€šè¿‡è¾“å…¥è¾“å‡ºé€šä¿¡
- ä¸´æ—¶æ–‡ä»¶ä¸äº¤å‰
- å¯å¹¶è¡Œå¼€å‘
```

### ğŸ“‹ ç»†åŒ–é˜¶æ®µï¼šä¸ºè¯¦ç»†è®¾è®¡åˆ›å»ºç»†åŒ–å·¥ä½œåŒº

**åœºæ™¯**ï¼šåŠŸèƒ½ç»†åŒ–æ—¶ï¼Œéœ€è¦ç‹¬ç«‹çš„ç»†åŒ–å·¥ä½œåŒº

**ç¤ºä¾‹**ï¼š
```
ç»†åŒ–éœ€æ±‚ï¼šç»†åŒ–ç”¨æˆ·è®¤è¯åŠŸèƒ½

å·¥ä½œåŒºç»†åŒ–ï¼š
ğŸ“‹ ç»†åŒ–å·¥ä½œåŒº

workspaces/task-001-user-module/
â”œâ”€ context.md           # åŸå§‹ä»»åŠ¡ä¸Šä¸‹æ–‡
â”‚
â”œâ”€ subtask-001-auth-api/
â”‚   â”œâ”€ context.md       # è®¤è¯APIå­ä»»åŠ¡ä¸Šä¸‹æ–‡
â”‚   â”œâ”€ input/
â”‚   â”‚   â””â”€ auth_requirements.md
â”‚   â”œâ”€ output/
â”‚   â”‚   â””â”€ auth_api_spec.md
â”‚   â””â”€ workspace/
â”‚       â””â”€ api_design.md
â”‚
â”œâ”€ subtask-002-session-management/
â”‚   â”œâ”€ context.md       # ä¼šè¯ç®¡ç†å­ä»»åŠ¡ä¸Šä¸‹æ–‡
â”‚   â”œâ”€ input/
â”‚   â”œâ”€ output/
â”‚   â”‚   â””â”€ session_design.md
â”‚   â””â”€ workspace/
â”‚
â””â”€ subtask-003-user-profile/
    â”œâ”€ context.md       # ç”¨æˆ·æ¡£æ¡ˆå­ä»»åŠ¡ä¸Šä¸‹æ–‡
    â”œâ”€ input/
    â”œâ”€ output/
    â”‚   â””â”€ profile_design.md
    â””â”€ workspace/

âœ… åˆ†å±‚å·¥ä½œåŒºï¼š
- ä¸»ä»»åŠ¡å·¥ä½œåŒº
- å­ä»»åŠ¡å·¥ä½œåŒº
- æ¯å±‚ä¸Šä¸‹æ–‡ç‹¬ç«‹
- æ”¯æŒä»»åŠ¡åˆ†è§£
```

### ğŸ“‹ æ™ºèƒ½é˜¶æ®µï¼šä¸ºæ™ºèƒ½ä½“åˆ›å»ºéš”ç¦»å·¥ä½œåŒº

**åœºæ™¯**ï¼šåˆ›å»ºå±€éƒ¨æ™ºèƒ½ä½“ï¼Œéœ€è¦ç‹¬ç«‹çš„å·¥ä½œåŒº

**ç¤ºä¾‹**ï¼š
```
æ™ºèƒ½ä½“ï¼šä»£ç å®¡æŸ¥æ™ºèƒ½ä½“

æ™ºèƒ½ä½“å·¥ä½œåŒºï¼š
ğŸ“‹ æ™ºèƒ½ä½“éš”ç¦»å·¥ä½œåŒº

workspaces/agents/
â”œâ”€ code-review-agent/
â”‚   â”œâ”€ context.md               # æ™ºèƒ½ä½“å±€éƒ¨ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€ è§’è‰²ï¼šä»£ç å®¡æŸ¥ä¸“å®¶
â”‚   â”‚   â”œâ”€ èƒ½åŠ›ï¼šä»£ç è´¨é‡åˆ†æ
â”‚   â”‚   â”œâ”€ è§„åˆ™ï¼šç¼–ç è§„èŒƒã€æœ€ä½³å®è·µ
â”‚   â”‚   â””â”€ è¾“å‡ºï¼šå®¡æŸ¥æŠ¥å‘Š
â”‚   â”œâ”€ capabilities.yaml         # æ™ºèƒ½ä½“èƒ½åŠ›å®šä¹‰
â”‚   â”œâ”€ input/
â”‚   â”‚   â””â”€ code_to_review.py
â”‚   â”œâ”€ output/
â”‚   â”‚   â””â”€ review_report.md
â”‚   â””â”€ workspace/
â”‚       â”œâ”€ analysis/            # åˆ†æç»“æœ
â”‚       â”œâ”€ cache/               # æ™ºèƒ½ä½“ç¼“å­˜
â”‚       â””â”€ logs/                # æ™ºèƒ½ä½“æ—¥å¿—
â”‚
â”œâ”€ test-gen-agent/
â”‚   â”œâ”€ context.md               # æµ‹è¯•ç”Ÿæˆæ™ºèƒ½ä½“ä¸Šä¸‹æ–‡ï¼ˆç‹¬ç«‹ï¼‰
â”‚   â”œâ”€ capabilities.yaml
â”‚   â”œâ”€ input/
â”‚   â”œâ”€ output/
â”‚   â””â”€ workspace/
â”‚
â””â”€ doc-gen-agent/
    â”œâ”€ context.md               # æ–‡æ¡£ç”Ÿæˆæ™ºèƒ½ä½“ä¸Šä¸‹æ–‡ï¼ˆç‹¬ç«‹ï¼‰
    â”œâ”€ capabilities.yaml
    â”œâ”€ input/
    â”œâ”€ output/
    â””â”€ workspace/

âœ… æ™ºèƒ½ä½“éš”ç¦»ï¼š
- æ¯ä¸ªæ™ºèƒ½ä½“ç‹¬ç«‹ä¸Šä¸‹æ–‡
- å±€éƒ¨ä¸Šä¸‹æ–‡ï¼Œä¸æ˜¯å…¨å±€ä¸Šä¸‹æ–‡
- æ™ºèƒ½ä½“é—´é€šè¿‡æ¥å£é€šä¿¡
- å•ä¸ªæ™ºèƒ½ä½“å¤±è´¥ä¸å½±å“å…¶ä»–
- é˜²æ­¢ä¸Šä¸‹æ–‡è†¨èƒ€ï¼ˆ98%å‡å°‘ï¼‰
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. å·¥ä½œåŒºåˆ›å»ºä¸åˆå§‹åŒ–

**åˆ›å»ºå·¥ä½œåŒº**
```yaml
create_workspace:
  command: workspace create --task "ç”¨æˆ·è®¤è¯è®¾è®¡" --id 001
  output:
    directory: task-001-user-auth/
    structure:
      - context.md
      - input/
      - output/
      - workspace/
      - metadata.json

  metadata:
    task_id: "001"
    task_name: "ç”¨æˆ·è®¤è¯è®¾è®¡"
    status: "pending"
    created_at: "2025-12-26T10:00:00Z"
    parent_task: null
```

**ä¸Šä¸‹æ–‡åˆå§‹åŒ–**
```markdown
# context.md è‡ªåŠ¨ç”Ÿæˆæ¨¡æ¿

## ä»»åŠ¡ä¿¡æ¯
- ä»»åŠ¡ID: 001
- ä»»åŠ¡åç§°: ç”¨æˆ·è®¤è¯è®¾è®¡
- çŠ¶æ€: pending

## çº¦æŸæ¡ä»¶
- æŠ€æœ¯æ ˆ: Node.js + JWT
- å®‰å…¨è¦æ±‚: åŠ å¯†å­˜å‚¨
- æ€§èƒ½è¦æ±‚: å“åº”æ—¶é—´ < 100ms

## è¾“å…¥
- [ ] éœ€æ±‚æ–‡æ¡£
- [ ] æŠ€æœ¯è§„èŒƒ

## è¾“å‡º
- [ ] è®¤è¯APIè®¾è®¡
- [ ] æ•°æ®åº“è®¾è®¡
- [ ] å®‰å…¨æ–¹æ¡ˆ

## æ‰§è¡Œå†å²
ï¼ˆè®°å½•æ¯æ¬¡æ‰§è¡Œçš„è¾“å…¥è¾“å‡ºï¼‰
```

### 2. å·¥ä½œåŒºçŠ¶æ€ç®¡ç†

**çŠ¶æ€è¿½è¸ª**
```yaml
workspace_states:
  pending:
    description: å·¥ä½œåŒºå·²åˆ›å»ºï¼Œä»»åŠ¡æœªå¼€å§‹
    actions: ["start-task", "delete-workspace"]

  in_progress:
    description: ä»»åŠ¡æ­£åœ¨æ‰§è¡Œ
    actions: ["pause-task", "complete-task", "fail-task"]

  completed:
    description: ä»»åŠ¡æˆåŠŸå®Œæˆ
    actions: ["archive-workspace", "cleanup-temp"]

  failed:
    description: ä»»åŠ¡å¤±è´¥
    actions: ["retry-task", "debug-workspace", "cleanup-workspace"]

  archived:
    description: å·¥ä½œåŒºå·²å½’æ¡£
    actions: ["restore-workspace", "delete-workspace"]
```

**çŠ¶æ€æŸ¥è¯¢**
```bash
# æŸ¥çœ‹æ‰€æœ‰å·¥ä½œåŒºçŠ¶æ€
workspace status --all

# æŸ¥çœ‹ç‰¹å®šå·¥ä½œåŒºçŠ¶æ€
workspace status --id 001

# è¾“å‡ºç¤ºä¾‹
Workspaces: 5 total
â”œâ”€ task-001-user-auth (completed)
â”œâ”€ task-002-order-flow (in_progress)
â”œâ”€ task-003-payment-api (pending)
â”œâ”€ task-004-test-gen (completed)
â””â”€ task-005-doc-gen (failed)
```

### 3. ä¸Šä¸‹æ–‡éš”ç¦»ç®¡ç†

**ä¸Šä¸‹æ–‡éš”ç¦»æ£€æŸ¥**
```yaml
isolation_checks:
  directory_isolation:
    - æ£€æŸ¥å·¥ä½œåŒºç›®å½•ç‹¬ç«‹æ€§
    - æ£€æŸ¥æ— è·¨å·¥ä½œåŒºæ–‡ä»¶å¼•ç”¨
    - æ£€æŸ¥æ— å…±äº«ä¸Šä¸‹æ–‡æ–‡ä»¶

  context_isolation:
    - æ£€æŸ¥context.mdåªåŒ…å«æœ¬ä»»åŠ¡ä¿¡æ¯
    - æ£€æŸ¥æ— å¤–éƒ¨ä¸Šä¸‹æ–‡å¼•ç”¨
    - æ£€æŸ¥ä¸Šä¸‹æ–‡å¤§å°åˆç†ï¼ˆ< 5000 tokensï¼‰

  runtime_isolation:
    - æ£€æŸ¥ä»»åŠ¡åœ¨å·¥ä½œåŒºå†…æ‰§è¡Œ
    - æ£€æŸ¥æ— è·¨å·¥ä½œåŒºæ–‡ä»¶æ“ä½œ
    - æ£€æŸ¥ä¸´æ—¶æ–‡ä»¶åœ¨å·¥ä½œåŒºå†…
```

**ä¸Šä¸‹æ–‡å¤§å°ç›‘æ§**
```yaml
context_monitoring:
  size_limits:
    soft_limit: 3000 tokens   # è­¦å‘Šé˜ˆå€¼
    hard_limit: 5000 tokens   # é˜»æ­¢é˜ˆå€¼

  actions:
    warning:
      - è®°å½•æ—¥å¿—
      - é€šçŸ¥ç”¨æˆ·
      - å»ºè®®æ¸…ç†

    blocking:
      - é˜»æ­¢æ‰§è¡Œ
      - å¼ºåˆ¶æ¸…ç†
      - ä¸Šä¸‹æ–‡å‹ç¼©
```

### 4. å·¥ä½œåŒºæ¸…ç†ä¸å½’æ¡£

**è‡ªåŠ¨æ¸…ç†**
```yaml
auto_cleanup:
  on_success:
    - æ¸…ç† workspace/ ç›®å½•
    - ä¿ç•™ output/ å…³é”®æ–‡ä»¶
    - å‹ç¼© context.md
    - å½’æ¡£åˆ° archives/

  on_failure:
    - ä¿ç•™æ‰€æœ‰æ–‡ä»¶ç”¨äºè°ƒè¯•
    - æ ‡è®°å·¥ä½œåŒºçŠ¶æ€
    - ç”Ÿæˆå¤±è´¥æŠ¥å‘Š

  scheduled:
    - æ¸…ç†30å¤©å‰å®Œæˆçš„å·¥ä½œåŒº
    - å‹ç¼©å½’æ¡£60å¤©å‰çš„å·¥ä½œåŒº
    - åˆ é™¤90å¤©å‰çš„å½’æ¡£
```

**æ‰‹åŠ¨æ¸…ç†**
```bash
# æ¸…ç†ç‰¹å®šå·¥ä½œåŒº
workspace cleanup --id 001

# æ¸…ç†æ‰€æœ‰å·²å®Œæˆçš„å·¥ä½œåŒº
workspace cleanup --status completed

# æ¸…ç†æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶
workspace cleanup --temp-only

# å¼ºåˆ¶æ¸…ç†æ‰€æœ‰å·¥ä½œåŒº
workspace cleanup --force --all
```

---

## è¾“å‡ºæ ¼å¼

### å·¥ä½œåŒºçŠ¶æ€è¾“å‡º

```json
{
  "workspace_info": {
    "task_id": "001",
    "task_name": "ç”¨æˆ·è®¤è¯è®¾è®¡",
    "status": "completed",
    "created_at": "2025-12-26T10:00:00Z",
    "completed_at": "2025-12-26T11:30:00Z",
    "duration": "1h 30m"
  },
  "context_info": {
    "context_size": 2500,
    "context_tokens": "within limits",
    "isolated": true
  },
  "file_stats": {
    "input_files": 3,
    "output_files": 5,
    "temp_files": 2,
    "total_size": "2.5MB"
  },
  "isolation_report": {
    "directory_isolation": "pass",
    "context_isolation": "pass",
    "no_cross_references": "pass"
  }
}
```

### æ‰€æœ‰å·¥ä½œåŒºæ¦‚è§ˆ

```json
{
  "summary": {
    "total_workspaces": 5,
    "by_status": {
      "pending": 1,
      "in_progress": 1,
      "completed": 2,
      "failed": 1
    },
    "total_disk_usage": "125MB",
    "context_sizes": {
      "min": 1500,
      "max": 4500,
      "average": 2800
    }
  },
  "workspaces": [
    {
      "id": "001",
      "name": "ç”¨æˆ·è®¤è¯è®¾è®¡",
      "status": "completed",
      "context_size": 2500
    },
    {
      "id": "002",
      "name": "è®¢å•æµç¨‹è®¾è®¡",
      "status": "in_progress",
      "context_size": 3200
    }
  ]
}
```

---

## è´¨é‡æ£€æŸ¥æ¸…å•

### å·¥ä½œåŒºåˆ›å»ºæ£€æŸ¥
- [ ] ç›®å½•ç»“æ„æ­£ç¡®
- [ ] context.md åˆå§‹åŒ–
- [ ] metadata.json è®°å½•
- [ ] å·¥ä½œåŒºéš”ç¦»éªŒè¯

### ä¸Šä¸‹æ–‡éš”ç¦»æ£€æŸ¥
- [ ] ä¸Šä¸‹æ–‡æ–‡ä»¶ç‹¬ç«‹
- [ ] æ— è·¨å·¥ä½œåŒºå¼•ç”¨
- [ ] ä¸Šä¸‹æ–‡å¤§å°åˆç†
- [ ] éš”ç¦»æ£€æŸ¥é€šè¿‡

### æ¸…ç†å½’æ¡£æ£€æŸ¥
- [ ] æˆåŠŸä»»åŠ¡æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- [ ] å¤±è´¥ä»»åŠ¡ä¿ç•™è°ƒè¯•ä¿¡æ¯
- [ ] å½’æ¡£æœºåˆ¶å·¥ä½œæ­£å¸¸
- [ ] ç£ç›˜ç©ºé—´åˆç†

---

## åä½œæŠ€èƒ½

- **dnaspec-task-decomposer**: ä»»åŠ¡åˆ†è§£ï¼Œä¸ºæ¯ä¸ªå­ä»»åŠ¡åˆ›å»ºå·¥ä½œåŒº
- **dnaspec-agent-creator**: æ™ºèƒ½ä½“åˆ›å»ºï¼Œä¸ºæ¯ä¸ªæ™ºèƒ½ä½“åˆ›å»ºéš”ç¦»å·¥ä½œåŒº
- **dnaspec-context-optimization**: ä¸Šä¸‹æ–‡ä¼˜åŒ–ï¼Œç®¡ç†å·¥ä½œåŒºä¸Šä¸‹æ–‡å¤§å°
- **dnaspec-git**: ç‰ˆæœ¬ç®¡ç†ï¼Œç®¡ç†å·¥ä½œåŒºè¾“å‡ºæ–‡ä»¶çš„ç‰ˆæœ¬æ§åˆ¶

---

## å…³é”®æˆå°±

1. âœ… **ç‹¬ç«‹å·¥ä½œåŒºéš”ç¦»** - æ¯ä¸ªä»»åŠ¡/æ™ºèƒ½ä½“æœ‰ç‹¬ç«‹å·¥ä½œç©ºé—´
2. âœ… **é˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“** - å·¥ä½œåŒºé—´ç›¸äº’éš”ç¦»ï¼Œäº’ä¸å¹²æ‰°
3. âœ… **ä¸Šä¸‹æ–‡å¤§å°æ§åˆ¶** - ç›‘æ§å’Œç®¡ç†å·¥ä½œåŒºä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢çˆ†ç‚¸
4. âœ… **è‡ªåŠ¨æ¸…ç†å½’æ¡£** - ä»»åŠ¡å®Œæˆåè‡ªåŠ¨æ¸…ç†ï¼Œä¿æŒç¯å¢ƒæ•´æ´
5. âœ… **å…¨ç”Ÿå‘½å‘¨æœŸåº”ç”¨** - Ideaâ†’éœ€æ±‚â†’ç»†åŒ–â†’æ™ºèƒ½å››é˜¶æ®µæ”¯æŒ
6. âœ… **æ ¼å¼å¡”åŸåˆ™ä½“ç°** - æ•´ä½“æ€§è®¾è®¡ã€ä»ç®€å•åˆ°å¤æ‚æ¼”åŒ–

---

*æ­¤æŠ€èƒ½å®ç°ç‹¬ç«‹å·¥ä½œåŒºç®¡ç†ï¼Œé€šè¿‡ä¸Šä¸‹æ–‡éš”ç¦»å’Œè‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡æ±¡æŸ“å’Œçˆ†ç‚¸ï¼Œç¡®ä¿æ¯ä¸ªä»»åŠ¡åœ¨å¹²å‡€ã€ç‹¬ç«‹çš„ç¯å¢ƒä¸­æ‰§è¡Œã€‚*
