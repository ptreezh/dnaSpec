---
name: dnaspec-dapi-checker
description: Implement hierarchical reviews across module, subsystem, and system levels. Verify multi-layer call alignment and scope management. When you need interface consistency checks, API validation at multiple levels, or hierarchical architecture verification, use this skill. Supports bottom-up modular validation to ensure system consistency.
---

# DNASPEC DAPI Checker

## ä½¿ç”¨æ—¶æœº

å½“ç”¨æˆ·æåˆ°ä»¥ä¸‹éœ€æ±‚æ—¶ï¼Œä½¿ç”¨æ­¤æŠ€èƒ½ï¼š
- "æ¥å£ä¸€è‡´æ€§æ£€æŸ¥" æˆ– "interface consistency check"
- "åˆ†çº§å®¡æ ¸" æˆ– "hierarchical review"
- "å¤šå±‚çº§è°ƒç”¨å¯¹é½" æˆ– "multi-layer alignment"
- "APIè§„èŒƒéªŒè¯" æˆ– "API specification validation"
- "æ¨¡å—çº§å®¡æ ¸" æˆ– "module-level review"
- "å­ç³»ç»Ÿçº§å®¡æ ¸" æˆ– "subsystem-level review"
- "ç³»ç»Ÿçº§å®¡æ ¸" æˆ– "system-level review"
- "è·¨å±‚çº§è°ƒç”¨" æˆ– "cross-layer calls"
- éœ€è¦ç¡®ä¿å„å±‚çº§æ¥å£ä¸€è‡´æ€§
- éœ€è¦é˜²æ­¢æ¶æ„å¤±æ§

**ä¸è¦åœ¨ä»¥ä¸‹æƒ…å†µä½¿ç”¨**ï¼š
- âŒ å•ä¸€æ¨¡å—å†…éƒ¨æ£€æŸ¥ï¼ˆä½¿ç”¨å…¶ä»–å·¥å…·ï¼‰
- âŒ ä»£ç è´¨é‡æ£€æŸ¥ï¼ˆä½¿ç”¨ä»£ç å®¡æŸ¥å·¥å…·ï¼‰
- âŒ ä¸€èˆ¬æ¶æ„è®¨è®ºï¼ˆä½¿ç”¨architectæŠ€èƒ½ï¼‰

## æ ¸å¿ƒæ¦‚å¿µ

### ğŸ¯ åˆ†çº§å®¡æ ¸æœºåˆ¶

**ä»€ä¹ˆæ˜¯åˆ†çº§å®¡æ ¸ï¼Ÿ**

åˆ†å¸ƒå¼ç³»ç»Ÿå­˜åœ¨å¤šä¸ªå±‚çº§ï¼š
- **æ¨¡å—çº§** - å•ä¸ªæ¨¡å—çš„å†…éƒ¨æ¥å£
- **å­ç³»ç»Ÿçº§** - æ¨¡å—é—´çš„æ¥å£
- **ç³»ç»Ÿçº§** - å­ç³»ç»Ÿé—´çš„æ¥å£

åˆ†çº§å®¡æ ¸å°±æ˜¯åœ¨æ¯ä¸ªå±‚çº§ä¸Šè¿›è¡Œç‹¬ç«‹çš„æ¥å£ä¸€è‡´æ€§æ£€æŸ¥ã€‚

**ä¸‰å±‚å®¡æ ¸æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç³»ç»Ÿçº§å®¡æ ¸ (System Level)              â”‚
â”‚  - å­ç³»ç»ŸA â†” å­ç³»ç»ŸB æ¥å£å¯¹é½          â”‚
â”‚  - ç³»ç»Ÿçº§åè®®ä¸€è‡´æ€§                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­ç³»ç»Ÿçº§å®¡æ ¸  â”‚  â”‚ å­ç³»ç»Ÿçº§å®¡æ ¸  â”‚
â”‚ Subsystem A   â”‚  â”‚ Subsystem B   â”‚
â”‚ - æ¨¡å—1â†”2æ¥å£  â”‚  â”‚ - æ¨¡å—3â†”4æ¥å£  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“  â†“              â†“  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨¡å—çº§å®¡æ ¸ (Module Level)               â”‚
â”‚  - æ¨¡å—1å†…éƒ¨æ¥å£                       â”‚
â”‚  - æ¨¡å—2å†…éƒ¨æ¥å£                       â”‚
â”‚  - æ¨¡å—3å†…éƒ¨æ¥å£                       â”‚
â”‚  - æ¨¡å—4å†…éƒ¨æ¥å£                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ å¤šå±‚çº§è°ƒç”¨å¯¹é½

**è°ƒç”¨å±‚çº§**ï¼š

```
ç”¨æˆ·å±‚ (User Layer)
    â†“ è°ƒç”¨
APIç½‘å…³å±‚ (Gateway Layer)
    â†“ è°ƒç”¨
æœåŠ¡å±‚ (Service Layer)
    â†“ è°ƒç”¨
ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)
    â†“ è°ƒç”¨
æ•°æ®è®¿é—®å±‚ (Data Access Layer)
    â†“ è°ƒç”¨
æ•°æ®å­˜å‚¨å±‚ (Data Storage Layer)
```

**å¯¹é½æ£€æŸ¥**ï¼š
- å‚æ•°æ ¼å¼å¯¹é½
- é”™è¯¯å¤„ç†å¯¹é½
- è¶…æ—¶è®¾ç½®å¯¹é½
- è®¤è¯æ–¹å¼å¯¹é½
- æ•°æ®æ ¼å¼å¯¹é½

**ä¸å¯¹é½çš„ä¾‹å­**ï¼š
```
æœåŠ¡å±‚è°ƒç”¨: getUserInfo(userId: string)
æ•°æ®å±‚å®šä¹‰: getUserInfo(id: number)

ä¸å¯¹é½ï¼å‚æ•°åå’Œç±»å‹éƒ½ä¸ä¸€è‡´
```

**å¯¹é½å**ï¼š
```
æœåŠ¡å±‚è°ƒç”¨: getUserInfo(userId: string)
æ•°æ®å±‚å®šä¹‰: getUserInfo(userId: string)

âœ… å®Œå…¨å¯¹é½
```

### ğŸ¯ è‡ªåº•å‘ä¸ŠéªŒè¯

**éªŒè¯é¡ºåº**ï¼š

```
ç¬¬1æ­¥: æ¨¡å—çº§éªŒè¯
  éªŒè¯æ¯ä¸ªæ¨¡å—çš„å†…éƒ¨æ¥å£ä¸€è‡´æ€§
  â””â”€ ä¾‹å¦‚: UserServiceæ¨¡å—å†…çš„æ–¹æ³•æ¥å£

ç¬¬2æ­¥: å­ç³»ç»Ÿçº§éªŒè¯
  éªŒè¯æ¨¡å—é—´æ¥å£ä¸€è‡´æ€§
  â””â”€ ä¾‹å¦‚: UserService â†” OrderService çš„æ¥å£

ç¬¬3æ­¥: ç³»ç»Ÿçº§éªŒè¯
  éªŒè¯å­ç³»ç»Ÿé—´æ¥å£ä¸€è‡´æ€§
  â””â”€ ä¾‹å¦‚: ç”¨æˆ·å­ç³»ç»Ÿ â†” è®¢å•å­ç³»ç»Ÿçš„æ¥å£
```

**ä¸ºä»€ä¹ˆè‡ªåº•å‘ä¸Šï¼Ÿ**

1. **åŸºç¡€ä¼˜å…ˆ** - æ¨¡å—æ˜¯åŸºç¡€ï¼Œå¿…é¡»å…ˆéªŒè¯
2. **éš”ç¦»é—®é¢˜** - åº•å±‚é—®é¢˜å®¹æ˜“å®šä½å’Œä¿®å¤
3. **é€çº§æ„å»º** - ç¡®ä¿æ¯ä¸€å±‚éƒ½ç¨³å›ºåå†å‘ä¸Š
4. **æ•ˆç‡æ›´é«˜** - é¿å…é«˜å±‚æ£€æŸ¥åè¿˜è¦å›å¤´çœ‹åº•å±‚

---

## å…¨ç”Ÿå‘½å‘¨æœŸåº”ç”¨

### ğŸ“‹ Ideaé˜¶æ®µï¼šå®šä¹‰APIçº§åˆ«çš„åˆå§‹ç»“æ„

**åœºæ™¯**ï¼šé¡¹ç›®åˆæœŸï¼Œè§„åˆ’æ¥å£ç»“æ„

**æ“ä½œ**ï¼š
```
/dnaspec-dapi-checker "define-structure"

ç³»ç»Ÿæç¤ºï¼š
"è¯·æè¿°ç³»ç»Ÿçš„åˆæ­¥ç»“æ„"

ç”¨æˆ·è¾“å…¥ï¼š
"ç”¨æˆ·æœåŠ¡ï¼ŒåŒ…å«ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†"

åˆ†çº§ç»“æ„å®šä¹‰ï¼š
ğŸ“¦ æ¨¡å—çº§:
  æ¨¡å—: UserService
  å†…éƒ¨æ¥å£:
    - registerUser()
    - loginUser()
    - getUserInfo()
    - updateUserInfo()

ğŸ“¦ å­ç³»ç»Ÿçº§:
  å¾…å®šä¹‰: æ¨¡å—é—´è°ƒç”¨

ğŸ“¦ ç³»ç»Ÿçº§:
  å¾…å®šä¹‰: å­ç³»ç»Ÿé—´è°ƒç”¨

æ¥å£è§„èŒƒå·²å®šä¹‰ï¼Œç­‰å¾…å®ç°
```

### ğŸ“‹ éœ€æ±‚é˜¶æ®µï¼šéªŒè¯åŠŸèƒ½æ¨¡å—é—´çš„æ¥å£å¯¹é½

**åœºæ™¯**ï¼šå¤šä¸ªæ¨¡å—ååŒå·¥ä½œ

**æ“ä½œ**ï¼š
```
/dnaspec-dapi-checker "check-module-alignment"

æ£€æŸ¥èŒƒå›´:
æ¨¡å—A: UserService
æ¨¡å—B: OrderService
æ¨¡å—C: PaymentService

æ£€æŸ¥ç»“æœ:
âœ… æ¨¡å—A â†’ æ¨¡å—B: getUserInfo() æ¥å£å¯¹é½
âœ… æ¨¡å—B â†’ æ¨¡å—C: processPayment() æ¥å£å¯¹é½
âš ï¸ æ¨¡å—A â†’ æ¨¡å—C: getUserInfo() å‚æ•°ä¸å¯¹é½
   - UserServiceå®šä¹‰: userId: string
   - PaymentServiceæœŸæœ›: user_id: number

å»ºè®®: ç»Ÿä¸€ä½¿ç”¨ userId: string
```

### ğŸ“‹ ç»†åŒ–é˜¶æ®µï¼šæ£€æŸ¥å­ç³»ç»Ÿçº§æ¥å£ä¸€è‡´æ€§

**åœºæ™¯**ï¼šå­ç³»ç»Ÿå†…éƒ¨æ¥å£ç»†åŒ–

**æ“ä½œ**ï¼š
```
/dnaspec-dapi-checker "check-subsystem"

å­ç³»ç»Ÿ: ç”¨æˆ·å­ç³»ç»Ÿ
åŒ…å«æ¨¡å—:
  - UserService
  - AuthService
  - ProfileService

å­ç³»ç»Ÿçº§å®¡æ ¸:
1. UserService â†” AuthService æ¥å£å¯¹é½
   éªŒè¯Tokenæ ¼å¼
   éªŒè¯æƒé™æ£€æŸ¥
   ç»“æœ: âœ… å¯¹é½

2. UserService â†” ProfileService æ¥å£å¯¹é½
   éªŒè¯æ•°æ®åŒæ­¥
   éªŒè¯æ›´æ–°è§¦å‘
   ç»“æœ: âš ï¸ åŒæ­¥ç­–ç•¥ä¸ä¸€è‡´

å»ºè®®: ä½¿ç”¨äº‹ä»¶é©±åŠ¨åŒæ­¥
```

### ğŸ“‹ æ™ºèƒ½é˜¶æ®µï¼šç¡®ä¿æ™ºèƒ½ä½“APIç¬¦åˆå¤šå±‚çº§è§„èŒƒ

**åœºæ™¯**ï¼šæ™ºèƒ½ä½“è°ƒç”¨ç³»ç»ŸAPI

**æ“ä½œ**ï¼š
```
æ™ºèƒ½ä½“A: ç”¨æˆ·ç®¡ç†æ™ºèƒ½ä½“

å¤šå±‚çº§è§„èŒƒæ£€æŸ¥:
æ¨¡å—çº§:
  âœ… æ™ºèƒ½ä½“è°ƒç”¨çš„APIå­˜åœ¨äºUserService
  âœ… å‚æ•°ç±»å‹æ­£ç¡®

å­ç³»ç»Ÿçº§:
  âœ… æ™ºèƒ½ä½“è°ƒç”¨é¡ºåºåˆç†
  âš ï¸ ç¼ºå°‘é”™è¯¯é‡è¯•æœºåˆ¶

ç³»ç»Ÿçº§:
  âœ… æ™ºèƒ½ä½“æƒé™æ­£ç¡®
  âœ… è°ƒç”¨é¢‘ç‡åœ¨é™åˆ¶å†…

å»ºè®®: æ·»åŠ è°ƒç”¨å¤±è´¥é‡è¯•é€»è¾‘
```

---

## æ ¸å¿ƒåŠŸèƒ½

### 1. æ¨¡å—çº§å®¡æ ¸

**å®¡æ ¸èŒƒå›´**ï¼š
- æ¨¡å—å†…éƒ¨æ¥å£å®šä¹‰
- æ–¹æ³•ç­¾åä¸€è‡´æ€§
- å‚æ•°å‘½åè§„èŒƒ
- è¿”å›å€¼æ ¼å¼

**å®¡æ ¸ç¤ºä¾‹**ï¼š
```javascript
// UserService æ¨¡å—
class UserService {
  // âœ… æ¥å£å®šä¹‰æ¸…æ™°
  async getUserInfo(userId: string): Promise<UserInfo>

  // âœ… å‚æ•°ç±»å‹æ˜ç¡®
  async updateUser(userId: string, data: UpdateUserData): Promise<User>

  // âš ï¸ å‘½åä¸ä¸€è‡´
  async deleteUser(id: number): Promise<void>  // åº”è¯¥ç”¨ userId: string

  // âŒ è¿”å›ç±»å‹ä¸ä¸€è‡´
  async validateUser(id: string): any  // åº”è¯¥æ˜ç¡®è¿”å›ç±»å‹
}

æ¨¡å—çº§å®¡æ ¸æŠ¥å‘Š:
{
  "module": "UserService",
  "internal_interfaces": 4,
  "consistent": 3,
  "inconsistent": 1,
  "issues": [
    {
      "method": "deleteUser",
      "issue": "å‚æ•°å‘½åä¸ä¸€è‡´",
      "expected": "userId: string",
      "actual": "id: number"
    },
    {
      "method": "validateUser",
      "issue": "è¿”å›ç±»å‹ä¸æ˜ç¡®",
      "expected": "Promise<ValidationResult>",
      "actual": "any"
    }
  ]
}
```

### 2. å­ç³»ç»Ÿçº§å®¡æ ¸

**å®¡æ ¸èŒƒå›´**ï¼š
- æ¨¡å—é—´è°ƒç”¨åè®®
- æ•°æ®æ ¼å¼å¯¹é½
- é”™è¯¯å¤„ç†ä¸€è‡´æ€§
- ä¾èµ–å…³ç³»æ­£ç¡®æ€§

**å®¡æ ¸ç¤ºä¾‹**ï¼š
```yaml
å­ç³»ç»Ÿ: ç”µå•†å­ç³»ç»Ÿ
æ¨¡å—:
  - UserService
  - OrderService
  - PaymentService

æ¨¡å—é—´è°ƒç”¨:
  OrderService â†’ UserService:
    è°ƒç”¨: getUserInfo(userId: string)
    éªŒè¯:
      - âœ… å‚æ•°ç±»å‹å¯¹é½
      - âœ… è¿”å›å€¼å¯¹é½
      - âœ… é”™è¯¯å¤„ç†å¯¹é½

  OrderService â†’ PaymentService:
    è°ƒç”¨: processPayment(orderId: string, amount: number)
    éªŒè¯:
      - âœ… å‚æ•°ç±»å‹å¯¹é½
      - âš ï¸ é‡‘é¢å•ä½ä¸ä¸€è‡´
        OrderService: å…ƒ (number)
        PaymentService: åˆ† (number)
      å»ºè®®: ç»Ÿä¸€ä½¿ç”¨æœ€å°å•ä½ï¼šåˆ†

  PaymentService â†’ UserService:
    è°ƒç”¨: getUserCredit(userId: string)
    éªŒè¯:
      - âœ… å‚æ•°ç±»å‹å¯¹é½
      - âŒ æ¥å£ä¸å­˜åœ¨
      å»ºè®®: æ·»åŠ æ¥å£æˆ–åˆ é™¤è°ƒç”¨

å­ç³»ç»Ÿçº§å®¡æ ¸æŠ¥å‘Š:
{
  "subsystem": "ç”µå•†å­ç³»ç»Ÿ",
  "module_count": 3,
  "inter_module_calls": 3,
  "aligned": 2,
  "misaligned": 1,
  "missing_interfaces": 1,
  "recommendations": [
    "ç»Ÿä¸€é‡‘é¢å•ä½ä¸ºï¼šåˆ†",
    "æ·»åŠ getUserCreditæ¥å£åˆ°UserService"
  ]
}
```

### 3. ç³»ç»Ÿçº§å®¡æ ¸

**å®¡æ ¸èŒƒå›´**ï¼š
- å­ç³»ç»Ÿé—´åè®®
- è·¨ç³»ç»Ÿè°ƒç”¨å¯¹é½
- ç³»ç»Ÿçº§æ¥å£è§„èŒƒ
- æ•´ä½“æ¶æ„ä¸€è‡´æ€§

**å®¡æ ¸ç¤ºä¾‹**ï¼š
```yaml
ç³»ç»Ÿçº§:
  å­ç³»ç»ŸA: ç”¨æˆ·å­ç³»ç»Ÿ
  å­ç³»ç»ŸB: è®¢å•å­ç³»ç»Ÿ
  å­ç³»ç»ŸC: æ”¯ä»˜å­ç³»ç»Ÿ
  å­ç³»ç»ŸD: ç‰©æµå­ç³»ç»Ÿ

å­ç³»ç»Ÿé—´è°ƒç”¨:
  å­ç³»ç»ŸB â†’ å­ç³»ç»ŸA:
    è°ƒç”¨: verifyUser(userId: string)
    éªŒè¯:
      - âœ… æ¥å£å­˜åœ¨
      - âœ… åè®®å¯¹é½
      - âœ… è®¤è¯å¯¹é½
      - âœ… æ•°æ®æ ¼å¼å¯¹é½

  å­ç³»ç»ŸB â†’ å­ç³»ç»ŸC:
    è°ƒç”¨: processPayment(orderData: OrderDTO)
    éªŒè¯:
      - âœ… æ¥å£å­˜åœ¨
      - âš ï¸ DTOæ ¼å¼ä¸ä¸€è‡´
        å­ç³»ç»ŸB: orderId, amount, userId
        å­ç³»ç»ŸC: order_id, amount, user_id
      å»ºè®®: ç»Ÿä¸€ä½¿ç”¨camelCase

  å­ç³»ç»ŸB â†’ å­ç³»ç»ŸD:
    è°ƒç”¨: arrangeDelivery(orderId: string)
    éªŒè¯:
      - âœ… æ¥å£å­˜åœ¨
      - âš ï¸ é”™è¯¯ç ä¸ä¸€è‡´
        å­ç³»ç»ŸBè¿”å›: {error: "NOT_FOUND", code: 404}
        å­ç³»ç»ŸDæœŸæœ›: {status: "error", code: "NOT_FOUND"}
      å»ºè®®: ç»Ÿä¸€é”™è¯¯ç æ ¼å¼

ç³»ç»Ÿçº§å®¡æ ¸æŠ¥å‘Š:
{
  "system": "ç”µå•†å¹³å°",
  "subsystem_count": 4,
  "inter_subsystem_calls": 3,
  "aligned": 1,
  "needs_improvement": 2,
  "critical_issues": [
    "DTOæ ¼å¼ä¸ç»Ÿä¸€",
    "é”™è¯¯ç æ ¼å¼ä¸ä¸€è‡´"
  ],
  "alignment_score": 0.67,
  "recommendations": [
    "åˆ¶å®šç³»ç»Ÿçº§DTOè§„èŒƒ",
    "ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶"
  ]
}
```

### 4. è·¨å±‚çº§è°ƒç”¨å¯¹é½

**åœºæ™¯**ï¼šåŒä¸€åŠŸèƒ½è·¨å¤šä¸ªå±‚çº§è°ƒç”¨

**ä¸å¯¹é½ç¤ºä¾‹**ï¼š
```
APIå±‚ (POST /api/users/:id):
  å‚æ•°: id (string)

æœåŠ¡å±‚:
  getUserById(id: string) âœ…

æ•°æ®å±‚:
  findById(id: number) âŒ ä¸å¯¹é½ï¼

é—®é¢˜: ç±»å‹ä¸ä¸€è‡´ï¼Œå¯èƒ½é€ æˆè¿è¡Œæ—¶é”™è¯¯
```

**å¯¹é½ç¤ºä¾‹**ï¼š
```
APIå±‚ (POST /api/users/:id):
  å‚æ•°: id (string)

æœåŠ¡å±‚:
  getUserById(userId: string) âœ…

æ•°æ®å±‚:
  findById(userId: string) âœ…

âœ… æ‰€æœ‰å±‚çº§å®Œå…¨å¯¹é½
```

### 5. è‡ªåº•å‘ä¸ŠéªŒè¯æµç¨‹

**ç¬¬ä¸€æ­¥ï¼šæ¨¡å—çº§éªŒè¯**
```
æ¨¡å—Aå†…éƒ¨:
  â”œâ”€ æ–¹æ³•1æ¥å£: âœ… ä¸€è‡´
  â”œâ”€ æ–¹æ³•2æ¥å£: âœ… ä¸€è‡´
  â””â”€ æ–¹æ³•3æ¥å£: âš ï¸ ä¸ä¸€è‡´
      â””â”€ ä¿®å¤å: âœ…

æ¨¡å—çº§éªŒè¯é€šè¿‡ â†’ è¿›å…¥å­ç³»ç»Ÿçº§
```

**ç¬¬äºŒæ­¥ï¼šå­ç³»ç»Ÿçº§éªŒè¯**
```
å­ç³»ç»ŸSåŒ…å«: æ¨¡å—A, æ¨¡å—B, æ¨¡å—C

æ¨¡å—é—´è°ƒç”¨:
  A â†’ B: âœ… å¯¹é½
  A â†’ C: âš ï¸ ä¸å¯¹é½
  B â†’ C: âœ… å¯¹é½

ä¿®å¤Aâ†’Cå â†’ å­ç³»ç»Ÿçº§éªŒè¯é€šè¿‡ â†’ è¿›å…¥ç³»ç»Ÿçº§
```

**ç¬¬ä¸‰æ­¥ï¼šç³»ç»Ÿçº§éªŒè¯**
```
ç³»ç»ŸåŒ…å«: å­ç³»ç»ŸS1, S2, S3

å­ç³»ç»Ÿé—´è°ƒç”¨:
  S1 â†’ S2: âœ… å¯¹é½
  S1 â†’ S3: âš ï¸ ä¸å¯¹é½
  S2 â†’ S3: âœ… å¯¹é½

ä¿®å¤S1â†’S3å â†’ ç³»ç»Ÿçº§éªŒè¯é€šè¿‡ â†’ âœ… å®Œæˆ
```

---

## è¾“å‡ºæ ¼å¼

### æ¨¡å—çº§å®¡æ ¸æŠ¥å‘Š

```json
{
  "level": "module",
  "module_name": "UserService",
  "review_date": "2025-12-25",
  "summary": {
    "total_interfaces": 8,
    "consistent": 7,
    "inconsistent": 1
  },
  "inconsistencies": [
    {
      "interface": "deleteUser",
      "issue": "å‚æ•°å‘½åä¸ä¸€è‡´",
      "severity": "medium",
      "recommendation": "ä½¿ç”¨userId: stringè€Œéid: number"
    }
  ],
  "alignment_score": 0.875
}
```

### å­ç³»ç»Ÿçº§å®¡æ ¸æŠ¥å‘Š

```json
{
  "level": "subsystem",
  "subsystem_name": "ç”¨æˆ·å­ç³»ç»Ÿ",
  "review_date": "2025-12-25",
  "summary": {
    "module_count": 3,
    "inter_module_calls": 5,
    "aligned": 4,
    "misaligned": 1
  },
  "module_interfaces": {
    "UserService": {
      "provided": ["getUserInfo", "updateUser"],
      "consumed": ["validateToken"]
    },
    "AuthService": {
      "provided": ["validateToken"],
      "consumed": []
    },
    "ProfileService": {
      "provided": ["getProfile", "updateProfile"],
      "consumed": ["getUserInfo"]
    }
  },
  "inconsistencies": [
    {
      "caller": "ProfileService",
      "callee": "UserService",
      "method": "getUserInfo",
      "issue": "è¿”å›ç±»å‹ä¸åŒ¹é…",
      "expected": "Promise<UserProfile>",
      "actual": "Promise<UserInfo>"
    }
  ],
  "alignment_score": 0.8
}
```

### ç³»ç»Ÿçº§å®¡æ ¸æŠ¥å‘Š

```json
{
  "level": "system",
  "system_name": "ç”µå•†å¹³å°",
  "review_date": "2025-12-25",
  "summary": {
    "subsystem_count": 4,
    "inter_subsystem_calls": 6,
    "aligned": 5,
    "misaligned": 1
  },
  "subsystems": {
    "ç”¨æˆ·å­ç³»ç»Ÿ": {
      "provided": ["getUserInfo", "verifyUser"],
      "consumed": []
    },
    "è®¢å•å­ç³»ç»Ÿ": {
      "provided": ["createOrder"],
      "consumed": ["getUserInfo", "processPayment"]
    },
    "æ”¯ä»˜å­ç³»ç»Ÿ": {
      "provided": ["processPayment", "getUserCredit"],
      "consumed": []
    },
    "ç‰©æµå­ç³»ç»Ÿ": {
      "provided": ["arrangeDelivery"],
      "consumed": ["getOrderStatus"]
    }
  },
  "critical_issues": [
    {
      "caller": "æ”¯ä»˜å­ç³»ç»Ÿ",
      "callee": "ç”¨æˆ·å­ç³»ç»Ÿ",
      "method": "getUserCredit",
      "issue": "æ¥å£ä¸å­˜åœ¨",
      "severity": "high",
      "recommendation": "æ·»åŠ getUserCreditæ¥å£åˆ°ç”¨æˆ·å­ç³»ç»Ÿ"
    }
  ],
  "alignment_score": 0.83
}
```

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: æ¨¡å—çº§å®¡æ ¸

**è¾“å…¥**ï¼š
```
æ£€æŸ¥UserServiceæ¨¡å—çš„æ¥å£ä¸€è‡´æ€§
```

**è¾“å‡º**ï¼š
```
ğŸ“‹ æ¨¡å—çº§å®¡æ ¸æŠ¥å‘Š

æ¨¡å—: UserService
å®¡æ ¸æ—¶é—´: 2025-12-25

å†…éƒ¨æ¥å£:
âœ… registerUser(newUser: RegisterDTO): Promise<User>
âœ… loginUser(credentials: LoginDTO): Promise<AuthResult>
âœ… getUserInfo(userId: string): Promise<UserInfo>
âš ï¸ updateUser(id: number, data: UpdateUserDTO): Promise<User>
   é—®é¢˜: å‚æ•°åº”è¯¥æ˜¯userId: string
âŒ deleteUser(id: number): Promise<void>
   é—®é¢˜: å‚æ•°åº”è¯¥æ˜¯userId: string

ä¸€è‡´æ€§å¾—åˆ†: 0.75 (3/4ä¸€è‡´)

ä¿®æ­£å»ºè®®:
1. ç»Ÿä¸€ä½¿ç”¨userId: stringä½œä¸ºç”¨æˆ·IDå‚æ•°
2. åˆ é™¤æˆ–ä¿®æ­£deleteUseræ¥å£
```

### ç¤ºä¾‹2: å­ç³»ç»Ÿçº§å®¡æ ¸

**è¾“å…¥**ï¼š
```
æ£€æŸ¥è®¢å•å­ç³»ç»Ÿçš„æ¨¡å—é—´æ¥å£å¯¹é½
```

**è¾“å‡º**ï¼š
```
ğŸ“‹ å­ç³»ç»Ÿçº§å®¡æ ¸æŠ¥å‘Š

å­ç³»ç»Ÿ: è®¢å•å­ç³»ç»Ÿ
åŒ…å«æ¨¡å—: OrderService, UserService, PaymentService

æ¨¡å—é—´è°ƒç”¨å®¡æ ¸:

OrderService â†’ UserService:
  è°ƒç”¨: getUserInfo(userId: string)
  æ£€æŸ¥:
    âœ… æ¥å£å­˜åœ¨
    âœ… å‚æ•°ç±»å‹åŒ¹é…
    âœ… è¿”å›ç±»å‹åŒ¹é…
  ç»“æœ: âœ… å®Œå…¨å¯¹é½

OrderService â†’ PaymentService:
  è°ƒç”¨: processPayment(orderId: string, amount: number)
  æ£€æŸ¥:
    âœ… æ¥å£å­˜åœ¨
    âœ… å‚æ•°ç±»å‹åŒ¹é…
    âš ï¸ é‡‘é¢å•ä½å«ä¹‰ä¸æ˜ç¡®
      OrderService: é‡‘é¢å•ä½åº”è¯¥æ˜¯"å…ƒ"
      PaymentService: é‡‘é¢å•ä½åº”è¯¥æ˜¯"åˆ†"
      å»ºè®®: æ˜ç¡®å•ä½æˆ–ç»Ÿä¸€ä¸ºæœ€å°å•ä½
  ç»“æœ: âš ï¸ éœ€è¦æ”¹è¿›

ä¸€è‡´æ€§å¾—åˆ†: 0.85

ä¼˜å…ˆä¿®æ­£:
1. æ˜ç¡®é‡‘é¢å•ä½ï¼Œå»ºè®®ç»Ÿä¸€ä¸º"åˆ†"
```

### ç¤ºä¾‹3: ç³»ç»Ÿçº§å®¡æ ¸

**è¾“å…¥**ï¼š
```
æ£€æŸ¥ç”µå•†å¹³å°çš„å­ç³»ç»Ÿé—´æ¥å£å¯¹é½
```

**è¾“å‡º**ï¼š
```
ğŸ“‹ ç³»ç»Ÿçº§å®¡æ ¸æŠ¥å‘Š

ç³»ç»Ÿ: ç”µå•†å¹³å°
åŒ…å«å­ç³»ç»Ÿ: ç”¨æˆ·ã€è®¢å•ã€æ”¯ä»˜ã€ç‰©æµ

å­ç³»ç»Ÿé—´è°ƒç”¨å®¡æ ¸:

ç”¨æˆ·å­ç³»ç»Ÿ:
  æä¾›: getUserInfo, verifyUser
  è¢«: è®¢å•ã€æ”¯ä»˜å­ç³»ç»Ÿè°ƒç”¨
  å¯¹é½: âœ…

è®¢å•å­ç³»ç»Ÿ:
  æä¾›: createOrder, getOrderStatus
  è¢«: ç‰©æµå­ç³»ç»Ÿè°ƒç”¨
  å¯¹é½: âœ…

æ”¯ä»˜å­ç³»ç»Ÿ:
  æä¾›: processPayment
  è¢«: è®¢å•å­ç³»ç»Ÿè°ƒç”¨
  å¯¹é½: âœ…

ç‰©æµå­ç³»ç»Ÿ:
  æä¾›: arrangeDelivery, getDeliveryStatus
  è¢«: è®¢å•å­ç³»ç»Ÿè°ƒç”¨
  å¯¹é½: âœ…

ä¸€è‡´æ€§å¾—åˆ†: 1.0 (å®Œå…¨å¯¹é½)

ç»“è®º: âœ… æ‰€æœ‰å­ç³»ç»Ÿé—´æ¥å£å®Œå…¨å¯¹é½
å»ºè®®: æŒç»­ç›‘æ§ï¼Œä¿æŒå¯¹é½
```

---

## è´¨é‡æ£€æŸ¥æ¸…å•

### æ¨¡å—çº§æ£€æŸ¥
- [ ] å†…éƒ¨æ¥å£å®šä¹‰æ¸…æ™°
- [ ] æ–¹æ³•ç­¾åä¸€è‡´
- [ ] å‚æ•°å‘½åè§„èŒƒç»Ÿä¸€
- [ ] è¿”å›å€¼ç±»å‹æ˜ç¡®

### å­ç³»ç»Ÿçº§æ£€æŸ¥
- [ ] æ¨¡å—é—´è°ƒç”¨åè®®å¯¹é½
- [ ] æ•°æ®æ ¼å¼ä¸€è‡´
- [ ] é”™è¯¯å¤„ç†ç»Ÿä¸€
- [ ] ä¾èµ–å…³ç³»æ­£ç¡®

### ç³»ç»Ÿçº§æ£€æŸ¥
- [ ] å­ç³»ç»Ÿé—´åè®®å¯¹é½
- [ ] è·¨å±‚çº§è°ƒç”¨ä¸€è‡´
- [ ] æ•´ä½“æ¶æ„åè°ƒ
- [ ] ç³»ç»Ÿçº§è§„èŒƒç»Ÿä¸€

### åˆ†çº§éªŒè¯æ£€æŸ¥
- [ ] æ¨¡å—çº§éªŒè¯é€šè¿‡
- [ ] å­ç³»ç»Ÿçº§éªŒè¯é€šè¿‡
- [ ] ç³»ç»Ÿçº§éªŒè¯é€šè¿‡
- [ ] è‡ªåº•å‘ä¸Šæµç¨‹å®Œæˆ

---

## åä½œæŠ€èƒ½

- **dnaspec-architect**: æ•´ä½“æ¶æ„åè°ƒ
- **dnaspec-system-architect**: ç³»ç»Ÿæ¶æ„è®¾è®¡
- **dnaspec-modulizer**: æ¨¡å—åŒ–éªŒè¯
- **dnaspec-constraint-generator**: æ¥å£çº¦æŸè§„èŒƒ

---

## å…³é”®æˆå°±

1. âœ… **åˆ†çº§å®¡æ ¸æœºåˆ¶** - æ¨¡å—ã€å­ç³»ç»Ÿã€ç³»ç»Ÿä¸‰çº§
2. âœ… **å¤šå±‚çº§è°ƒç”¨å¯¹é½** - è·¨å±‚çº§åè®®ä¸€è‡´
3. âœ… **è‡ªåº•å‘ä¸ŠéªŒè¯** - é€çº§å‘ä¸ŠéªŒè¯
4. âœ… **å…¨ç”Ÿå‘½å‘¨æœŸåº”ç”¨** - Ideaâ†’éœ€æ±‚â†’ç»†åŒ–â†’æ™ºèƒ½
5. âœ… **é˜²æ­¢æ¶æ„å¤±æ§** - ç¡®ä¿å„å±‚çº§åè°ƒä¸€è‡´
6. âœ… **ç³»ç»Ÿåè°ƒæ€§** - ç»´æŠ¤æ•´ä½“æ¶æ„ä¸€è‡´æ€§

---

*æ­¤æŠ€èƒ½å®ç°åˆ†çº§å®¡æ ¸æœºåˆ¶ï¼Œé€šè¿‡è‡ªåº•å‘ä¸Šçš„éªŒè¯æµç¨‹ï¼Œç¡®ä¿åˆ†å¸ƒå¼ç³»ç»Ÿå„å±‚çº§çš„æ¥å£ä¸€è‡´æ€§ï¼Œé˜²æ­¢æ¶æ„å¤±æ§ã€‚*
